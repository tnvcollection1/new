<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shopify CSV Scraper (Web)</title>
  <link rel="icon" href="/static/favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">üõçÔ∏è Shopify CSV Scraper ‚Äî Web</h1>
    <form method="post" action="/generate" class="space-y-6 bg-white p-5 rounded-xl shadow">
      <div>
        <label class="block font-medium mb-1">Collection URL (or single product)</label>
        <input name="collection_url" type="url" required class="w-full border rounded px-3 py-2" placeholder="https://www.example.com/collection-or-product" />
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block font-medium mb-1">Limit products (0 = all)</label>
          <input name="limit_products" type="number" min="0" value="0" class="w-full border rounded px-3 py-2" />
        </div>
        <div>
          <label class="block font-medium mb-1">Vendor (default)</label>
          <input name="vendor_default" type="text" value="" class="w-full border rounded px-3 py-2" />
        </div>
        <div>
          <label class="block font-medium mb-1">Type (fallback)</label>
          <input name="product_type_fallback" type="text" value="" class="w-full border rounded px-3 py-2" />
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block font-medium mb-1">Product Category</label>
          <input name="product_category" type="text" value="" class="w-full border rounded px-3 py-2" />
        </div>
        <div>
          <label class="block font-medium mb-1">Extra Tags (comma)</label>
          <input name="extra_tags" type="text" value="" class="w-full border rounded px-3 py-2" />
        </div>
        <div>
          <label class="block font-medium mb-1">Option1 Name</label>
          <input name="option1_name" type="text" value="Size" class="w-full border rounded px-3 py-2" />
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-medium mb-1">Image row strategy</label>
          <select name="image_strategy" class="w-full border rounded px-3 py-2">
            <option value="separate">Separate image rows</option>
            <option value="first_variant" selected>Put first image on first variant row</option>
            <option value="all_variants">Put first image on all variant rows</option>
          </select>
        </div>
        <div>
          <label class="block font-medium mb-1">Variant image strategy</label>
          <select name="variant_image_strategy" class="w-full border rounded px-3 py-2">
            <option value="rotate" selected>Rotate angles across variants</option>
            <option value="none">None</option>
          </select>
        </div>
      </div>

      <details class="border rounded p-3">
        <summary class="cursor-pointer font-semibold">Metafields (optional)</summary>
        <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div>
            <label class="block font-medium mb-1">Namespace</label>
            <input name="meta_namespace" type="text" value="custom" class="w-full border rounded px-3 py-2" />
          </div>
          <div class="md:col-span-2 grid grid-cols-2 gap-3">
            <label class="inline-flex items-center gap-2"><input type="checkbox" name="add_metafields"> <span>Enable</span></label>
            <label class="inline-flex items-center gap-2"><input type="checkbox" name="meta_design_code" checked> <span>Design Code</span></label>
            <label class="inline-flex items-center gap-2"><input type="checkbox" name="meta_fabric" checked> <span>Fabric</span></label>
            <label class="inline-flex items-center gap-2"><input type="checkbox" name="meta_color" checked> <span>Color</span></label>
            <label class="inline-flex items-center gap-2"><input type="checkbox" name="meta_work_details" checked> <span>Work Details</span></label>
          </div>
        </div>
      </details>

      <div class="pt-2">
        <button class="bg-slate-900 text-white rounded px-4 py-2 hover:bg-slate-800">Generate CSV</button>
      </div>
    </form>

    <p class="text-sm text-slate-500 mt-4">
      Deployed on Render? Add health check path <code>/healthz</code> in settings to silence HEAD logs.
    </p>
  </div>
</body>
</html>
